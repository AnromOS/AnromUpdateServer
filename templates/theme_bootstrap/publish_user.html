{% extends "publish_base.html" %}

{% block body %}
<div class="container">
<div class="panel panel-primary">
    <div class="panel-heading"><strong>{{ escape(ptitle) }}</strong> 添加一个新的开发者</div>
    <div class="panel-body">
      <form action="?a=add" method="post" class="form" role="form"  enctype="multipart/form-data">
          
          <div class="form-group">
            <label for="uname">开发者ID(在页面上显示) </label>
            <input type="text" name="uname" id="uname" class="form-control" placeholder="用户的ID"
            {% if (pupdate!=None) %}
                value="{{ escape(pupdate['u_name']) }}" 
            {% else %}
                value=""
            {% end %}
            >
          </div>
          
          <div class="form-group">
            <label for="channels">用户类型（若不选，则默认是开发者）:  </label><br>
            {% if (pupdate!=None) and (pupdate['u_role']=='admin') %}
                <div class="radio-inline">
                  <label><input type="radio" name="urole" id="admin" value="admin" checked="true"/>{{ getStatuStr('admin') }}</label>
                </div>
                <div class="radio-inline">
                  <label><input type="radio" name="urole" id="developer" value="developer" />{{ getStatuStr('developer') }}</label>
                </div>
            {% else %}
                <div class="radio-inline">
                  <label><input type="radio" name="urole" id="admin" value="admin"/>{{ getStatuStr('admin') }}</label>
                </div>
                <div class="radio-inline">
                  <label><input type="radio" name="urole" id="developer" value="developer" checked="true"/>{{ getStatuStr('developer') }}</label>
                </div>
            {% end %}
          </div>
          
          <div class="form-group">
            <label for="upassword">用户密码 </label>
            <input name="upassword" id="upassword" type="password" class="form-control" placeholder="不能为空" value="" >
          </div>
          
          <div class="form-group">
            <label for="upassword2">再次输入用户密码 </label>
            <input name="upassword2" id="upassword2" type="password" class="form-control" placeholder="不能为空" value="" >
          </div>
          
          <div class="form-group">
            <label for="udescription">简介</label>
            <textarea type="text" name="udescription" id="udescription" rows=3 class="form-control" placeholder="用一段文字描述这个用户">
{% if (pupdate!=None) %}
    {{ escape(pupdate['u_description']) }}
{% end %}
</textarea>
    <!--<script type="text/javascript" src="/static/editor/tinyeditor.js"></script>
                <link rel="stylesheet" href="/static/editor/style.css" />
                <script type="text/javascript">
                    var instance=new TINY.editor.edit('editor',{
                        id:'mdescription',
                        width:740,
                        height:275,
                        cssclass:'contentls',
                        controlclass:'tecontrol',
                        rowclass:'teheader',
                        dividerclass:'tedivider',
                        controls:['bold','italic','underline','strikethrough','|','subscript','superscript','|', 'orderedlist','unorderedlist','|','outdent','indent','|','leftalign',
                            'centeralign','rightalign','blockjustify','|','unformat','|','undo','redo','print','n',
                            'font','size','style','forecolor','backcolor','|','image','swf','media','upload','|','hr','link','unlink','|','cut','copy','paste'],
                        footer:true,
                        fonts:['楷体','宋体','黑体','Verdana','Arial','Georgia'],
                        xhtml:true,
                        uploadexc:"",
                        bodyid:'editor',
                        footerclass:'tefooter',
                        toggle:{text:'源码',activetext:'视图',cssclass:'toggle'},
                        resize:{cssclass:'resize'}
                    });
                </script>-->

          </div>
          <div class="form-group">
            <label for="uavatar">上传头像 {% if (pupdate!=None) %} <img class="img-rounded" height=35px src="/{{ escape(pupdate['u_avatar']) }}"/> {% end %}</label>
            <input type="file" name="uavatar" id="uavatar"></input>
          </div>
          <div class="form-group">
            <input type="text" name="upicname" id="upicname" class="hidden"
            {% if (pupdate!=None) %}
                value="{{ escape(pupdate['u_avatar']) }}"
            {% end %}
            ></input>
          </div>
          {% module xsrf_form_html() %}
        <input  class="btn btn-primary" type="submit" value="完成"/>
        </form>
      </div>
</div>
</div>
{% end %}

$def with (pdelta =None, pupgrade =None, ptitle=None)
$var title: $ptitle

<strong>$ptitle</strong>
<p>这个表单只是发布一个下载链接。升级文件请一律用其他工具上传到下载服务器, 然后将真实文件下载地址填写在表单中</p>
<div class="column">
<div class ="col-sm-12 col-xs-12 col-md-12" style="word-break:break-all; word-wrap:break-all;">
    <div class="panel panel-primary">
    <div class="panel-heading">发布完整升级包</div>
    <div class="panel-body">
        <form action="?a=add&t=full" method="post" class="form" role="form" enctype="multipart/form-data">
          <div class="form-group">
            <input class="hidden" name="wid" id="wid" 
            $if(pupgrade!=None):
                value="$pupgrade.id" 
            $else:
                value="" 
            >
            <label for="version">版本(version)</label>
            <input type="text" name="version" id="version" 
            $if(pupgrade!=None):
                value="$pupgrade.version" 
            $else:
                value="" 
            class="form-control" placeholder="软件版本号">
            
            <label for="version">版本标识(versioncode)</label>
            <input type="text" name="versioncode" id="versioncode" 
            $if(pupgrade!=None):
                value="$pupgrade.versioncode" 
            $else:
                value="" 
            class="form-control" placeholder="软件版本标识，递增的整数">
          </div>
          <div class="form-group">
            <label for="changelog">changelog</label>
            <textarea type="text" name="changelog" id="changelog"  class="form-control" rows="3" placeholder="发布的日志" >
$if(pupgrade!=None):
    $pupgrade.changelog
</textarea>
                <script type="text/javascript" src="/static/editor/tinyeditor.js"></script>
                <link rel="stylesheet" href="/static/editor/style.css" />
                <script type="text/javascript">
                    var instance=new TINY.editor.edit('editor',{
                        id:'changelog',
                        width:740,
                        height:275,
                        cssclass:'contentls',
                        controlclass:'tecontrol',
                        rowclass:'teheader',
                        dividerclass:'tedivider',
                        controls:['bold','italic','underline','strikethrough','|','subscript','superscript','|', 'orderedlist','unorderedlist','|','outdent','indent','|','leftalign',
                            'centeralign','rightalign','blockjustify','|','unformat','|','undo','redo','print','n',
                            'font','size','style','forecolor','backcolor','|','image','swf','media','upload','|','hr','link','unlink','|','cut','copy','paste'],
                        footer:true,
                        fonts:['楷体','宋体','黑体','Verdana','Arial','Georgia'],
                        xhtml:true,
                        uploadexc:"",
                        bodyid:'editor',
                        footerclass:'tefooter',
                        toggle:{text:'源码',activetext:'视图',cssclass:'toggle'},
                        resize:{cssclass:'resize'}
                    });
                </script>

          </div>
          
          <div class="form-group">
            <label for="url">url</label>
            <input type="text" name="url" id="url" 
            $if(pupgrade!=None):
                value="$pupgrade.url"
            $else:
                value="" 
            class="form-control" placeholder="升级文件的下载地址" >
           
            <label for="url">size</label>
            <input type="text" name="size" id="size" 
            $if(pupgrade!=None):
                value="$pupgrade.size"
            $else:
                value="" 
            class="form-control" placeholder="文件的大小单位(字节)" >
            
            <label for="muploadedfile">或者上传文件到本站所在服务器（选择上传文件则不必填写url和size字段）</label>
            <input type="file" name="muploadedfile" id="muploadedfile">
          </div>
          <div class="form-group">
            <label for="md5sum">md5sum</label>
            <input type="text" name="md5sum" id="md5sum" 
            $if(pupgrade!=None):
                value="$pupgrade.md5sum"
            $else:
                value="" 
            class="form-control" placeholder="升级文件的md5sum值">
          </div>
          <div class="form-group">
            <label for="channels">版本通道（若不选择默认是内部版本）:  </label>
            <div class="radio-inline">
              <label><input type="radio" name="channels" id="nightly" value="nightly">内部版（nightly）  </label>
            </div>
            <div class="radio-inline">
              <label><input type="radio" name="channels" id="release" value="release">正式版（release）</label>
            </div>
          </div>
          
        <input  class="btn btn-primary" type="submit" value="完成"/>
      </form>
    </div>
    </div>
</div>

<div class="col-sm-10 col-xs-10 col-md-10 hidden">
    <div class="panel panel-primary">
    <div class="panel-heading">发布增量升级包</div>
    <div class="panel-body">
      <form action="?a=add&t=delta" method="post" class="form" role="form" >
          <div class="form-group">
            <input class="hidden" name="wid" id="incremental" 
            $if(pdelta!=None):
                value="$pdelta.id" 
            $else:
                value="" 
            >
            <label for="source_incremental">source_incremental </label>
            <input type="text" name="source_incremental" id="source_incremental" 
            $if(pdelta!=None):
                value="$pdelta.source_incremental" 
            $else: 
                value=""
            class="form-control" placeholder="源版本增量标识">
          </div>
          <div class="form-group">
            <label for="target_incremental">target_incremental </label>
            <input type="text" name="target_incremental" id="target_incremental" 
            $if(pdelta!=None):
                value="$pdelta.target_incremental" 
            $else: 
                value=""
            class="form-control" placeholder="目的版本增量标识">
          </div>
          <div class="form-group">
            <label for="url">url</label>
            <input type="text" name="url" id="url"
            $if(pdelta!=None):
                value="$pdelta.url" 
            $else: 
                value=""
            class="form-control" placeholder="升级文件的下载地址">
          </div>
          <div class="form-group">
            <label for="md5sum">md5sum</label>
            <input type="text" name="md5sum" id="md5sum" 
            $if(pdelta!=None):
                value="$pdelta.md5sum" 
            $else: 
                value=""
            class="form-control" placeholder="升级文件的md5sum值">
          </div>
        <input  class="btn btn-primary" type="submit" value="完成"/>
        </form>
      </div>
    </div>
</div>
</div>
